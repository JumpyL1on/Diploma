@using Diploma.Common.DTOs
@if (_tournaments == null)
{
    <Loading/>
}
else
{
    <MudText Typo="Typo.h6" Class="mt-6">
        Мои турниры
    </MudText>
    @if (_tournaments.Count == 0)
    {
        <MudCard Class="mt-6">
            <MudCardContent Class="d-flex justify-center">
                <MudText Typo="Typo.body1">
                    Вы еще не участвовали в турнирах
                </MudText>
            </MudCardContent>
            <MudCardActions Class="d-flex justify-center">
                <MudButton Variant="Variant.Filled"
                           Href="/"
                           Color="Color.Primary">
                    <MudText Typo="Typo.body1">Перейти к турнирам</MudText>
                </MudButton>
            </MudCardActions>
        </MudCard>
    }
    else
    {
        <MudTable T="TournamentDTO" Items="_tournaments" Class="mt-6">
            <HeaderContent>
                <MudTh>Турнир</MudTh>
                <MudTh>Начало</MudTh>
                <MudTh>Формат проведения</MudTh>
                <MudTh>Формат участия</MudTh>
                <MudTh>Участники</MudTh>
                <MudTh>Статус</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd>
                    <MudLink Href="@($"/tournament/{context.Id}")">@context.Title</MudLink>
                </MudTd>
                <MudTd>@context.Start.ToLocalTime()</MudTd>
                <MudTd>Single Elimination</MudTd>
                <MudTd>5x5</MudTd>
                <MudTd>@($"{context.ParticipantsNumber}/{context.MaxParticipantsNumber}")</MudTd>
                @if (DateTime.UtcNow < context.Start)
                {
                    <MudTd>
                        До окончания регистрации @((context.Start - DateTime.UtcNow).ToString("g"))
                    </MudTd>
                }
                else if (context.End == null)
                {
                    <MudTd>
                        <MudText Typo="Typo.body1">
                            Завершится как можно скорее
                        </MudText>
                    </MudTd>
                }
            </RowTemplate>
        </MudTable>
    }
}